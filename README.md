# AI 虚拟试衣间 (AI Virtual Try-On)

> 一款完全运行在浏览器中的纯前端 AI 虚拟换装应用。利用 Google AI Studio 的 API，实现将任意服装图片“穿”在用户指定的模特照片上。本项目注重隐私和易用性，所有敏感信息（如 API Key 和个人照片）均存储在用户本地。

![应用界面截图](./showPoto/show.png)
*(注：上图为项目的设计效果图)*

---

## ✨ 项目简介

AI 虚拟试衣间是一个轻量级的移动端 Web 应用，旨在提供一个简单、快速的 AI 换装体验。与需要后端服务器和复杂部署的传统应用不同，本项目采用纯前端技术栈实现，这意味着：

*   **高隐私性:** 用户的 API Key 和个人照片仅保存在浏览器的 `localStorage` 中，绝不会上传到任何服务器。
*   **零后端成本:** 无需服务器、数据库或云函数，可以直接部署在任何静态网站托管平台（如 GitHub Pages, Vercel, Netlify）。
*   **完全可控:** 用户可以直接使用自己的 Google AI Studio 免费 API Key，对用量和成本有完全的控制。
*   **易于部署和修改:** 整个项目由 HTML, CSS (Tailwind) 和原生 JavaScript构成，代码结构清晰，易于二次开发。

## 🚀 主要功能

*   **服装上传:** 支持用户从手机相册选择或拍摄服装照片，并自动进行压缩和预处理。
*   **模特照设置:** 在设置页面预先上传一张全身照作为换装的基底模特，无需每次生成都重复上传。
*   **AI 生成:** 一键调用 AI 模型，将服装"穿"在模特身上，并展示生成结果。
*   **结果处理:** 支持将生成的图片**保存**到本地相册，或通过系统原生分享功能**分享**给朋友。
*   **页面导航系统:**
    *   主页面右上角的设置按钮，可快速访问设置页面
    *   设置页面左上角的返回按钮，可便捷回到主页面
    *   双向导航设计，提供流畅的用户体验
*   **API Key 管理:**
    *   支持添加**多个** Google AI API Key。
    *   自动进行**轮询**，以最大化利用免费额度。
    *   提供**批量验证**功能，直观显示每个 Key 的有效状态。
*   **AI 参数自定义:**
    *   可调节模型的**温度 (Temperature)** 参数，以控制生成结果的创造性。
    *   支持自定义**提示词 (Prompt)**，为 AI 提供更精确的生成指导。
*   **改进的用户界面:**
    *   优化的按钮设计，包含悬停效果和过渡动画
    *   Toast 通知系统，提供实时的操作反馈
    *   加载状态指示器，让用户了解处理进度
    *   响应式设计，完美适配移动端和桌面端
*   **数据持久化:** 所有设置（API Keys, AI 参数, 模特照片）都会自动保存在本地，关闭浏览器后依然存在。

## 🛠️ 技术栈

*   **前端框架:** 无。使用 **原生 JavaScript (ES6 模块化)** 构建，以保持项目的轻量和纯粹。
*   **样式方案:** **Tailwind CSS**，通过 CDN 引入，用于快速构建与设计稿一致的响应式界面。
*   **数据存储:** 浏览器 **`localStorage`**，用于持久化用户的所有设置。
*   **核心 API:** **Google AI Studio (Gemini Pro Vision API)** - *详见下面的重要提示*。

## 🏃‍♂️ 如何开始

本项目无需复杂的构建步骤，可以直接在浏览器中运行。

1.  **克隆仓库**
    ```bash
    git clone https://github.com/your-username/ai-virtual-try-on.git
    ```

2.  **本地运行**
    *   进入项目目录 `cd ai-virtual-try-on`。
    *   由于项目使用了 ES 模块，直接用 `file://` 协议打开 HTML 文件可能会遇到 CORS 策略问题。推荐使用一个简单的本地服务器来运行：
        *   如果你安装了 VS Code，可以安装 [Live Server](https://marketplace.visualstudio.com/items?itemName=ritwickdey.LiveServer) 插件，右键点击 `index.html` 或 `settings.html` 选择 "Open with Live Server"。
        *   或者使用 Python 的简易服务器：`python -m http.server`，然后在浏览器中访问 `http://localhost:8000`。

3.  **配置应用**
    *   打开浏览器，访问 `index.html` 主页面。
    *   点击右上角的 **设置按钮** (⚙️) 导航到设置页面。
    *   在 "API KEY 管理" 部分，添加你从 Google AI Studio 获取的 API Key。
    *   在 "我的全身照" 部分，上传一张你想要作为模特的清晰全身照。
    *   （可选）根据需要调整 "AI 模型参数"。
    *   配置完成后，点击左上角的 **返回按钮** (←) 回到主页面。

4.  **开始使用**
    *   在主页面中，上传一件服装的图片。
    *   点击 "Generate Try-On" 按钮，等待 AI 生成结果！
    *   生成完成后，可以保存或分享结果图片。

> 💡 **导航提示**: 在使用过程中，您可以随时通过右上角的设置按钮调整配置，通过设置页面的返回按钮回到主界面。

## 🎨 用户界面和导航

本项目注重用户体验，提供了直观且流畅的界面设计和导航系统。

### 导航流程
*   **主页面 → 设置页面**: 点击右上角的设置图标 (⚙️)
*   **设置页面 → 主页面**: 点击左上角的返回图标 (←)
*   双向导航设计，确保用户可以轻松在不同功能间切换

### 界面特性
*   **响应式设计**: 完美适配手机、平板和桌面设备
*   **Material Design 图标**: 使用 Google Material Icons 提供清晰的视觉指引
*   **悬停效果**: 所有可交互元素都有精心设计的悬停状态
*   **过渡动画**: 流畅的页面切换和状态变化动画

### 用户反馈系统
*   **Toast 通知**: 重要操作的成功/失败反馈
*   **加载指示器**: AI 生成过程中的进度提示
*   **状态管理**: 按钮禁用/启用状态，防止重复操作

### 主题支持
*   **亮色主题**: 默认的温暖色调设计
*   **深色模式**: （规划中）为夜间使用提供护眼模式
*   **自适应配色**: 基于橙色和粉色的温暖配色方案

## 📂 项目结构

项目的代码结构清晰且模块化，易于理解和维护。

```
/
├── index.html              # 主界面 (生成界面)，包含设置导航按钮
├── settings.html           # 设置界面，包含返回导航按钮
└── /assets/
    └── /js/
        ├── /services/
        │   ├── storage.service.js  # 封装 localStorage 逻辑，管理数据读写
        │   └── api.service.js      # 封装所有 Google AI API 调用、Key轮询和错误处理
        ├── /utils/
        │   ├── dom.util.js         # 封装 DOM 操作工具，如 Toast 提示
        │   └── image.util.js       # 封装图片校验、压缩、转换逻辑
        ├── settings.js             # 设置页面的主逻辑脚本，包含返回导航功能
        └── generator.js            # 生成页面的主逻辑脚本，包含设置导航功能
```

### 导航实现架构
*   **事件驱动设计**: 使用原生 JavaScript 事件监听器处理按钮点击
*   **页面级路由**: 通过 `window.location.href` 实现简单的页面跳转
*   **状态保持**: 每个页面独立管理其状态，通过 localStorage 实现跨页面数据持久化
*   **模块化结构**: 导航逻辑分别封装在对应的页面脚本中，便于维护

## ⚠️ 重要提示：关于 AI 模型

本项目最初的设计是基于调用一个能够执行**图像生成 (Image-to-Image)** 任务的 AI 模型。然而，当前 Google AI Studio 免费提供的 `Gemini Pro Vision` 模型是一个强大的多模态**理解**模型，它可以识别和分析图片内容，但其主要输出是**文本**，本身**不具备直接生成新图片**的能力。

因此，本项目中的 `api.service.js` 文件是作为一个**结构化的占位符**和理想化的实现。它正确地处理了 API Key 轮询、请求构造和错误处理，但如果直接对接标准的 `gemini-pro-vision` 端点，将无法返回图片结果。

要使本项目真正产生预期的图片效果，需要将 `api.service.js` 中的 API 请求部分替换为对接一个真正的图像生成模型 API，例如：

*   **Google Cloud Vertex AI** 中的 **Imagen** 模型。
*   其他第三方服务如 **Stable Diffusion** 的 API。

## 🌟 未来展望

### ✅ 已完成功能
*   [x] **实现页面导航系统**，在主页面和设置页面之间无缝切换
*   [x] **改进按钮交互设计**，提供更好的用户反馈和悬停效果
*   [x] **优化移动端体验**，确保响应式设计和流畅的操作

### 🚧 开发计划
*   [ ] **实现深色模式 (Dark Mode)**，并提供主题切换功能。
*   [ ] **集成真正的图像生成 API**，使项目功能完整可用。
*   [ ] **生成历史记录**，允许用户查看和管理之前生成的图片。
*   [ ] **更丰富的编辑功能**，如调整服装位置、选择生成风格等。
*   [ ] **批量服装处理**，支持一次性上传多件服装进行批量生成。
*   [ ] **用户偏好学习**，根据用户的历史选择优化 AI 参数设置。

## 📄 许可证 (License)

本项目采用 [MIT](https://opensource.org/licenses/MIT) 许可证。